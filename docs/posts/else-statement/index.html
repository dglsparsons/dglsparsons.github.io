<!DOCTYPE html><html domain=dgls.dev ga-id=UA-177820617-1 lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href="/img/favicon/favicon.ico?hash=ba55cd0070" rel=icon><meta content=#f9c412 name=theme-color><title>Write better code and be a better programmer by NEVER USING ELSE statements</title><meta content="dgls | dev" property=og:site_name><meta content=https://dgls.dev property=og:url><meta content="Write better code and be a better programmer by NEVER USING ELSE statements" property=og:title><meta content=website property=og:type><meta content="Write better code and be a better programmer by NEVER USING ELSE statements" property=twitter:title><meta content="I've written production code in a huge variety of languages, through Haskell, Scala, Go, Python, Java or JavaScript. Across all these, I noticed one significant trend: I pretty much never use the ELSE statement. Here's why." name=description><meta content="I've written production code in a huge variety of languages, through Haskell, Scala, Go, Python, Java or JavaScript. Across all these, I noticed one significant trend: I pretty much never use the ELSE statement. Here's why." property=og:description><meta content="I've written production code in a huge variety of languages, through Haskell, Scala, Go, Python, Java or JavaScript. Across all these, I noticed one significant trend: I pretty much never use the ELSE statement. Here's why." property=twitter:description><meta content=summary_large_image name=twitter:card><meta content=@dglsparsons name=twitter:site><meta content=@dglsparsons name=twitter:creator><meta content=https://dgls.dev/img/remote/thinking.webp property=twitter:image><meta content=https://dgls.dev/img/remote/Z2ep5Ym.webp property=og:image><link href=https://dgls.dev/posts/else-statement/ rel=canonical><meta content=no-referrer-when-downgrade name=referrer><link href=/feed/feed.xml rel=alternate title="dgls | blog" type=application/atom+xml><link href=/ rel=preconnect crossorigin=""><script src="/js/min.js?hash=17b5d2d281" async defer></script><script src="/js/cached.js?hash=4628d5e26f" async defer></script><script csp-hash="">if (/Mac OS X/.test(navigator.userAgent))document.documentElement.classList.add('apple')</script><style>:root{--primary: #5DFDCB;--primary-dark: #02DE99}.hero,body{display:flex;flex-direction:column}body{min-height:100vh}body main{flex-grow:1}dialog,share-widget{position:fixed;opacity:.9}share-widget{right:20px;bottom:20px}share-widget div{width:30px;height:30px;background-image:url(/img/share.svg);background-repeat:no-repeat;background-position:center}.apple share-widget div{background-image:url(/img/share-apple.svg)}body,share-widget button{margin:0}share-widget button:active{transform:scale(1.2)}dialog{background-color:var(--primary-dark)}aside{font-style:italic}#nav{z-index:2;position:relative}#reading-progress{z-index:1;background-color:var(--primary);width:100vw;position:absolute;left:0;top:0;bottom:0;transform:translate(-100vw,0);will-change:transform;pointer-events:none}#posts li{margin-bottom:.5em}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:100;src:url(/fonts/Inter-Thin.woff2) format("woff2"),url(/fonts/Inter-Thin.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:100;src:url(/fonts/Inter-ThinItalic.woff2) format("woff2"),url(/fonts/Inter-ThinItalic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:200;src:url(/fonts/Inter-ExtraLight.woff2) format("woff2"),url(/fonts/Inter-ExtraLight.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:200;src:url(/fonts/Inter-ExtraLightItalic.woff2) format("woff2"),url(/fonts/Inter-ExtraLightItalic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:300;src:url(/fonts/Inter-Light.woff2) format("woff2"),url(/fonts/Inter-Light.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:300;src:url(/fonts/Inter-LightItalic.woff2) format("woff2"),url(/fonts/Inter-LightItalic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:400;src:url(/fonts/Inter-Regular.woff2) format("woff2"),url(/fonts/Inter-Regular.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:400;src:url(/fonts/Inter-Italic.woff2) format("woff2"),url(/fonts/Inter-Italic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:500;src:url(/fonts/Inter-Medium.woff2) format("woff2"),url(/fonts/Inter-Medium.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:500;src:url(/fonts/Inter-MediumItalic.woff2) format("woff2"),url(/fonts/Inter-MediumItalic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:600;src:url(/fonts/Inter-SemiBold.woff2) format("woff2"),url(/fonts/Inter-SemiBold.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:600;src:url(/fonts/Inter-SemiBoldItalic.woff2) format("woff2"),url(/fonts/Inter-SemiBoldItalic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:700;src:url(/fonts/Inter-Bold.woff2) format("woff2"),url(/fonts/Inter-Bold.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:700;src:url(/fonts/Inter-BoldItalic.woff2) format("woff2"),url(/fonts/Inter-BoldItalic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:800;src:url(/fonts/Inter-ExtraBold.woff2) format("woff2"),url(/fonts/Inter-ExtraBold.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:800;src:url(/fonts/Inter-ExtraBoldItalic.woff2) format("woff2"),url(/fonts/Inter-ExtraBoldItalic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:normal;font-weight:900;src:url(/fonts/Inter-Black.woff2) format("woff2"),url(/fonts/Inter-Black.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI';font-style:italic;font-weight:900;src:url(/fonts/Inter-BlackItalic.woff2) format("woff2"),url(/fonts/Inter-BlackItalic.woff) format("woff")}@font-face{font-display:swap;font-family:'Inter UI var alt';font-weight:100 900;font-style:normal;font-named-instance:'Regular';src:url(/fonts/Inter-roman.var.woff2) format("woff2")}@font-face{font-display:swap;font-family:'Inter UI var alt';font-weight:100 900;font-style:italic;font-named-instance:'Italic';src:url(/fonts/Inter-italic.var.woff2) format("woff2")}.hero{min-height:600px;width:100%;background-position:top;background-size:cover;align-items:center;justify-content:center}html{scroll-padding-top:4rem;-webkit-text-size-adjust:100%}h1{line-height:3rem;font-size:3rem;margin:.67em 0}pre{max-width:calc(100%-3rem)}a{background-color:transparent;text-decoration:none;color:#444}b{font-weight:700}button,code{font-size:1rem}small{font-size:80%;color:#ccc}img{display:block;border-style:none;max-width:100%;height:auto;margin:0 auto}button,html{line-height:1.15}button{font-family:inherit;overflow:visible;text-transform:none}[type=button],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}h2{line-height:1.2;margin-bottom:.6em;line-height:2.4rem;margin-bottom:1.36rem;font-size:1.728rem}body,p,pre,ul{font-size:1rem;line-height:1.6}p,pre,ul{margin-bottom:1.5em}code,pre{overflow-x:auto}pre{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace}pre code:not([class]){padding:1.5em;overflow-x:scroll}button,code{border-radius:.3em}code{color:#e2777a;padding:0 .3em;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:90%;background:#2d2d2d}h1,h2,html{font-family:Inter UI,sans-serif}a:hover,p a{text-decoration:underline}@media (min-width:600px){h1{font-size:4.3978rem;line-height:4.4rem;margin-bottom:1.496rem}body,p,pre,ul{font-size:1.1rem;line-height:1.6}h2,p,pre,ul{margin-bottom:1.496rem}}@media (min-width:1200px){body,p,pre,ul{font-size:1.2rem;line-height:1.6}p,pre,ul{margin-bottom:1.632rem}}@media (max-width:767px){x:-moz-any-link{display:table-cell}}@supports (font-variation-settings:normal){html{font-family:Inter UI var alt,sans-serif}}button{max-width:100%;background:#f2f2f2;color:#191919;cursor:pointer;display:inline-block;padding:.75em 1.5em;text-align:center;margin:0 .75em 1.5em 0}button:hover{background:#d9d9d9;color:#000}button:not([disabled]){background:#f9c412;color:#fff;background:var(--primary)}button:not([disabled]):hover{background:#ba9005;color:#000;background:var(--primary-dark)}*{border:0;box-sizing:border-box}body,header nav a{font-family:Inter UI,sans-serif;color:#444}body,header nav{background:#fff}header{text-align:center;max-width:100%;display:flex;align-items:center;flex-direction:column}header p,ul{margin-top:0}header nav{position:fixed;top:0;left:0;width:100vw;padding:1rem;font-weight:200;text-align:right}header nav h1{float:left;font-size:inherit;line-height:inherit;margin:0;text-align:left}header nav a{font-weight:700;text-decoration:none;margin-left:1.5em}header nav a:first-of-type{margin-left:auto}header nav a:last-of-type{margin-right:1.5em}footer{background:#e9e9e9;padding:2rem;text-align:center}footer>*{margin:1.5em}footer nav a img{vertical-align:middle}footer nav,footer p{font-size:90%}article{max-width:50rem;padding:1rem;margin:0 auto}li ul{margin-bottom:0}blockquote{border-left:1px solid #f9c412;padding:0 1.5em;margin:1.5em 0 1.5em 1.5em}blockquote footer{background:0 0;display:block;color:#ccc;padding:.75em 0;font-size:90%;text-align:start}code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment{color:#999}.token.punctuation{color:#ccc}.token.boolean,.token.function{color:#f08d49}.token.constant,.token.property{color:#f8c555}.token.builtin,.token.important,.token.keyword{color:#cc99cd}.token.string{color:#7ec699}.token.operator,.token.url{color:#67cdcc}.token.important{font-weight:700}.token.inserted{color:green}</style><header><nav><div id=nav><h1><a href=/ title=Homepage>dgls | blog</a></h1><a href=/about/ >About</a></div><div id=reading-progress aria-hidden=true></div></nav><div class=hero style="background-image: linear-gradient(rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.8)), url('/img/remote/thinking.webp')"><h1>Write better code and be a better programmer by NEVER USING ELSE statements</h1><time datetime=2020-11-10>10 Nov 2020</time><aside>5 min read.</aside></div><dialog id=message></dialog></header><main><article><p>I've been a professional programmer for the last several years. During this time I've risen rapidly through the ranks. I started as an intern, but I'm now the Lead Engineer responsible for a suite of products that serve over 160,000 people in over 140 different countries.<p>Recently, I took a look back across all the code I've written during these years (that I still have access to). I've written production code in a huge variety of languages, through Haskell, Scala, Go, Python, Java or Javascript. Across all these, I noticed one significant trend: I pretty much never use the ELSE statement.<p>I realised there's a clear rationale behind my aversion to else statements though. I believe that they shouldn't be used, and should be treated as a code smell instead. There are two reasons I think this: else statements break the line-of-sight rule, and they always lack context. I'll explain these two points in detail before showing how you can avoid using else statements.<h2>Line of Sight rule</h2><p>I'm a firm believer that code should be optimised to be read by people in the future, rather than being optimised for being executed by machines. In this, I echo Donald Knuth's sentiment:<blockquote><p>“Programs are meant to be read by humans and only incidentally for computers to execute.” - Donald Knuth, The Art of Computer Programming.</blockquote><p>The problem is the ability to read code is subjective: it's hard to define exactly what makes code readable. One rule that seeks to clarify this though, is the line-of-sight rule. This is a popular rule in the Go community. <a href=https://medium.com/@matryer/line-of-sight-in-code-186dd7cdea88>Mat Ryer</a> defines it concisely in his talk and article. Simply stated, this is the idea that the ‘happy path' in code should be indented as little as possible.<p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/happy-path-1920w.webp 1920w, /img/remote/happy-path-1280w.webp 1280w, /img/remote/happy-path-640w.webp 640w, /img/remote/happy-path-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/happy-path-1920w.jpg 1920w, /img/remote/happy-path-1280w.jpg 1280w, /img/remote/happy-path-640w.jpg 640w, /img/remote/happy-path-320w.jpg 320w" type=image/jpeg><img alt="Happy path" decoding=async height=298 loading=lazy src=/img/remote/happy-path.png style="background-size:cover;contain-intrinsic-size: min(var(--main-width), 397px) min(calc(var(--main-width) * 0.7506297229219143), 298px);background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 397 298'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' x='0' y='0' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAIAAABV+fA3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzUlEQVQI12OwMTUL9HR3czA3NtLSNNRRM9KSl5OUkRaVl5dksLW187a09TSxtDAx0zDU1TTUVlWWVZaXUlORZQjz90909kwMjfT2CzSzMDXQVrEw1DDTV7Mw0GBITonPSUnOiEkIC4kICAn28ncO8rTwczL2tDNmKKsq6W5vLUrJSoxOCgoMcPdw8fNwDPeyj/GxZ2jra5vY211TXZdVUhEWE+8f4BMX4Z8d7Z8f7c3QN3vS4tnzpk6aVtnUlZiZExkTlpkcVZkRWZMeDACbqjrKhxc0bgAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&#34;)" width=397></picture><p>Contrastingly, any error handling or special case code should be indented further.<p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/special-case-1920w.webp 1920w, /img/remote/special-case-1280w.webp 1280w, /img/remote/special-case-640w.webp 640w, /img/remote/special-case-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/special-case-1920w.jpg 1920w, /img/remote/special-case-1280w.jpg 1280w, /img/remote/special-case-640w.jpg 640w, /img/remote/special-case-320w.jpg 320w" type=image/jpeg><img alt="Special case" decoding=async height=298 loading=lazy src=/img/remote/special-case.png style="background-size:cover;contain-intrinsic-size: min(var(--main-width), 392px) min(calc(var(--main-width) * 0.7602040816326531), 298px);background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 392 298'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' x='0' y='0' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAIAAABV+fA3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzUlEQVQI12PQUdOICQ1ytDYxMNDUNNJX1VWTkxGXlRGXkxNn0NHWiffy9zS3MTc10zDW19RVU1GUVlWSUVOWYfB0csgPiUyOivX0DzQ2MTDRU7My1rQwVLc0VGeIiY+sKCpMj0mICosKCgsJCHQO8bTwdTLxtjdiKCkv7GppKk7Pi42K8/b28vB0CfZ2jvZ1jPezY2jqaZ45ZXJLS0dmWU1kfGJwsG9qTFBhfEBBtAdD94wJi+bNn9wzubSmJSYpOS4hoiA9pjY7siLZHwCkFTsTnJ3NWgAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&#34;)" width=392></picture><p>Any code that follows this has a unique property: scanning the least indented code is sufficient to understand what any piece of code is doing. Scanning the more indented code shows all the special cases and errors that can occur. This makes it super easy to understand at just a glance.<p>So how do else statements relate to this?<p>Else statements are problematic as they force code down a level of indentation. It suddenly becomes unclear what code relates to a ‘happy path', and what a special case really is.<p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/unclear-else-1920w.webp 1920w, /img/remote/unclear-else-1280w.webp 1280w, /img/remote/unclear-else-640w.webp 640w, /img/remote/unclear-else-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/unclear-else-1920w.jpg 1920w, /img/remote/unclear-else-1280w.jpg 1280w, /img/remote/unclear-else-640w.jpg 640w, /img/remote/unclear-else-320w.jpg 320w" type=image/jpeg><img alt=Unclear decoding=async height=597 loading=lazy src=/img/remote/unclear-else.png style="background-size:cover;contain-intrinsic-size: min(var(--main-width), 522px) min(calc(var(--main-width) * 1.1436781609195403), 597px);background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 522 597'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' x='0' y='0' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAIAAAC6ZnJRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAu0lEQVQI1wGwAE//AGZhWXRuZnlzb3x2c42Fg5+XlcO7vABgYmFvbmV5em1+fXuTi4mnn5zJwsEAZ3x6coJ2fIWDiIqKkYyKnpqXwry7AF+Pm3SZno+jqYuZmY+WlZqcmbSxrgBVnLVcm7F2oKeCnp5/lJSCjoyYmZUAVq3DabC+fK63dKCqdJWYcIaBd4F7AE+xyleww1ymtFaUn09/hlRzdl1vawBIsMhJqr9GmatPh5BEcXgxXWQ6WVkp9llyWhWsSwAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&#34;)" width=522></picture><p>This lack of clarity makes the code harder to scan through, and hurts the readability.<h2>Lack of Context</h2><p>The ability to quickly and efficiently scan code is super important. Digesting small sections of code in isolation is a key part of this. We don't want to always have to read every line of code to understand a small part of a codebase.<p>Else statements make this harder as they space out the <code>if</code> condition and the code that is affected by it. This is best explained through two examples. First, can you tell what happens when these three lines of code are run?<pre class=language-go><code class=language-go><span class="token keyword">if</span> myVariable <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> “”<br><span class="token punctuation">}</span></code></pre><p>Hopefully, this is fairly obvious. Let's take a contrasting example though:<pre class=language-go><code class=language-go><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> “”<br><span class="token punctuation">}</span></code></pre><p>We can see that without the <code>if</code> statement, we can't determine what this is meant to be doing. Why would it return an empty string? Is this an error, or the ‘normal' behaviour? This code instead relies on us remembering, and having read, the earlier context. This doesn't matter much when the statements are small, but if there's complicated logic within the <code>if { … }</code> block or we are scanning quickly, then the separation of context from code can hurt readability massively. It hurts even more when if/else statements are nested, or there are multiple of them in one function (which if statement is this else for?).<h2>How to remove else statements?</h2><p>Now we've agreed that else statements are rubbish. But that's not much help by itself. The real trick is how to avoid them. Thankfully, there are two simple ways to do this:<ul><li>Inverting the <code>if</code> condition and returning early, and,<li>Creating helper functions.</ul><h2>Inverting the condition</h2><p>This is the most common instance I come across. It can take two forms too - one where the <code>else</code> is implicit, one where it is explicit. The explicit version looks like the following:<pre class=language-go><code class=language-go><span class="token keyword">func</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> something<span class="token punctuation">.</span><span class="token function">OK</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    err <span class="token operator">:=</span> something<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span> err<br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"something isn't ok"</span><span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>The implicit is similar, but without containing an <code>else</code> statement per se. Instead, the <code>else</code> is implied by simply dropping off the end of the function (this one is more common in Python or JavaScript, where <code>None</code> or <code>undefined</code> are returned if nothing is explicitly stated).<pre class=language-javascript><code class=language-javascript><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>something<span class="token punctuation">.</span><span class="token constant">OK</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> something<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>Again, this isn't super clear what the full extent of the behaviour is. Without reading the whole function, the return values aren't clear.<p>By simply inverting the <code>if</code> condition, we can solve all these problems though.<pre class=language-javascript><code class=language-javascript><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>something<span class="token punctuation">.</span><span class="token constant">OK</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// return or throw error</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">return</span> something<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>We can now scan this function and clearly see the indented error condition and normal flow, satisfying the line-of-sight rule. The behaviour is fully explicit, and we have no separation of context. This is much better.<h2>Helper Functions</h2><p>We also get else statements that don't directly result in a <code>return</code>. This is usually through some special-case logic that isn't isolated properly. For example<pre class=language-javascript><code class=language-javascript>  <span class="token keyword">let</span> charities<br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>country <span class="token operator">!=</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>tier <span class="token operator">!=</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      charities <span class="token operator">=</span> <span class="token function">getCharitiesByCampaignCountryAndTier</span><span class="token punctuation">(</span>campaign<span class="token punctuation">,</span> country<span class="token punctuation">,</span> tier<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>      charities <span class="token operator">=</span> <span class="token function">getCharitiesByCampaignAndCountry</span><span class="token punctuation">(</span>campaign<span class="token punctuation">,</span> country<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    charities <span class="token operator">=</span> <span class="token function">getCharitiesByCampaign</span><span class="token punctuation">(</span>campaign<span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token comment">// do something with charities</span></code></pre><p>The readability of this can be improved by pulling the charity-getting logic into its own function. This then lets the special cases be handled appropriately, and return early. By inverting some of the if statements, this can be improved further.<p>For example:<pre class=language-javascript><code class=language-javascript><span class="token keyword">function</span> <span class="token function">getCharities</span><span class="token punctuation">(</span><span class="token parameter">campaign<span class="token punctuation">,</span> country<span class="token punctuation">,</span> tier</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>country <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token function">getCharitiesByCampaign</span><span class="token punctuation">(</span>campaign<span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>tier <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token function">getCharitiesByCampaignAndCountry</span><span class="token punctuation">(</span>campaign<span class="token punctuation">,</span> country<span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">return</span> <span class="token function">getCharitiesByCampaignCountryAndTier</span><span class="token punctuation">(</span>campaign<span class="token punctuation">,</span> country<span class="token punctuation">,</span> tier<span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>This helper function neatly encapsulates all the logic we'd need, removes the need for any else statements, and does a much better job of keeping the happy-path code to the left. This is much easier to scan through, and much more readable as a result.<h2>Conclusion</h2><p>Else statements are a weird code smell. They harm the readability of any code by forcing equal levels of indents for error handling and for happy paths. They also have the unique ability to separate code from the logic that affects it. They are easy to avoid through the two techniques of returning early and splitting logic into helper functions. As a result, they are unnecessary. You can write better code and be a better programmer by never using them.<p>Some caveats (to stop the pedants).<ul><li>In SQL CASE WHEN … ELSE … isn't really avoidable.<li>In Scala, implicit returns (avoiding return statements for referential transparency) means you have to use them - you don't really have the ability to 'return early'.<li>Ternary operators are fine.<li>In python, the ternary operator uses <code>else</code>. This is also fine.</ul><script src=https://ko-fi.com/widgets/widget_2.js type=text/javascript></script><script type=text/javascript>kofiwidget2.init('Support Me on Ko-fi', '#444', 'R6R72KTY9');kofiwidget2.draw();</script><share-widget><button aria-label=Share href=https://dgls.dev/posts/else-statement/ on-click=share><div></div></button></share-widget><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"Write better code and be a better programmer by NEVER USING ELSE statements","image":["https://dgls.dev/img/remote/happy-path.png","https://dgls.dev/img/remote/special-case.png","https://dgls.dev/img/remote/unclear-else.png"],"author":"Douglas Parsons","genre":"technology and programming","publisher":{"@type":"Organization","name":"Douglas Parsons","logo":{"@type":"ImageObject","url":"/img/favicon/favicon-192x192.png?hash=1eead310e9"}},"url":"https://dgls.dev/posts/else-statement/","mainEntityOfPage":"https://dgls.dev/posts/else-statement/","datePublished":"2020-11-10","dateModified":"2021-08-10","description":"I&#39;ve been a professional programmer for the last several years. During this time I&#39;ve risen rapidly through the ranks. I started as an..."}</script></article></main><footer><a href=/about/ >Douglas Parsons</a></footer>